<% content_for :head do %>
  <%= javascript_import_module_tag 'controllers/ticker_show' %>
<% end %>

<div class="mx-auto md:w-2/3 w-full flex">
  <div class="mx-auto">
    <% if notice.present? %>
      <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
    <% end %>

    <% render @ticker %>

    <%= @ticker.symbol %>

    <div class="h-full" id="crypto_chart"></div>

    <% if @ticker.stats %>
      <p class="my-5">
        Current price: <%= @ticker.stats['current_price']['price'] %>
      </p>
      <p class="my-5">
        Balance: <%= @ticker.stats['balance'] %>
      </p>
      <p class="my-5">
        Mean price: <%= @ticker.stats['mean_price'] %>
      </p>
      <p class="my-5">
        PnL: <%= @ticker.stats['pnl'] %>
      </p>
    <% end %>

    <%= link_to 'Edit this ticker', edit_ticker_path(@ticker), class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
    <div class="inline-block ml-2">
      <%= button_to 'Destroy this ticker', ticker_path(@ticker), method: :delete, class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 font-medium" %>
    </div>
    <%= link_to 'Back to tickers', tickers_path, class: "ml-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
  </div>
</div>
